# Deploy to Dokku - calls reusable workflow from dokku-deploy-system
name: Deploy

on:
  workflow_dispatch:
  push:
    branches: [main, staging, develop]

permissions:
  contents: read
  deployments: write

concurrency:
  group: deploy-${{ github.ref }}
  cancel-in-progress: true

jobs:
  deploy:
    uses: signalwire-demos/dokku-deploy-system/.github/workflows/deploy.yml@main
    secrets: inherit
    # Optional: customize deployment settings
    # with:
    #   health_check_path: '/health'  # Health check endpoint (default: /health)
    #   memory_limit: '512m'          # Memory limit override
    #   cpu_limit: '1'                # CPU limit override
